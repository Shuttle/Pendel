<!DOCTYPE html>
<html lang="en-US" dir="ltr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Events | Shuttle</title>
    <meta name="description" content="Shuttle Documentation">
    <meta name="generator" content="VitePress v1.5.0">
    <link rel="preload stylesheet" href="/assets/style.CnbNCtm6.css" as="style">
    <link rel="preload stylesheet" href="/vp-icons.css" as="style">
    
    <script type="module" src="/assets/app.BTMHHDID.js"></script>
    <link rel="preload" href="/assets/inter-roman-latin.Di8DUHzh.woff2" as="font" type="font/woff2" crossorigin="">
    <link rel="modulepreload" href="/assets/chunks/theme.QRxwfmol.js">
    <link rel="modulepreload" href="/assets/chunks/framework.C4Vvvhxx.js">
    <link rel="modulepreload" href="/assets/shuttle-recall_events_overview.md.CGvTWBwS.lean.js">
    <link rel="shortcut icon" href="/favicon.ico">
    <script id="check-dark-mode">(()=>{const e=localStorage.getItem("vitepress-theme-appearance")||"auto",a=window.matchMedia("(prefers-color-scheme: dark)").matches;(!e||e==="auto"?a:e==="dark")&&document.documentElement.classList.add("dark")})();</script>
    <script id="check-mac-os">document.documentElement.classList.toggle("mac",/Mac|iPhone|iPod|iPad/i.test(navigator.platform));</script>
  </head>
  <body>
    <div id="app"><div class="Layout" data-v-5d98c3a5><!--[--><!--]--><!--[--><span tabindex="-1" data-v-0f60ec36></span><a href="#VPContent" class="VPSkipLink visually-hidden" data-v-0f60ec36> Skip to content </a><!--]--><!----><header class="VPNav" data-v-5d98c3a5 data-v-ae24b3ad><div class="VPNavBar" data-v-ae24b3ad data-v-6aa21345><div class="wrapper" data-v-6aa21345><div class="container" data-v-6aa21345><div class="title" data-v-6aa21345><div class="VPNavBarTitle has-sidebar" data-v-6aa21345 data-v-1168a8e4><a class="title" href="/" data-v-1168a8e4><!--[--><!--]--><!--[--><img class="VPImage logo" src="/logo.svg" alt data-v-8426fc1a><!--]--><span data-v-1168a8e4>Shuttle Documentation</span><!--[--><!--]--></a></div></div><div class="content" data-v-6aa21345><div class="content-body" data-v-6aa21345><!--[--><!--]--><div class="VPNavBarSearch search" data-v-6aa21345><!--[--><!----><div id="local-search"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><span class="vp-icon DocSearch-Search-Icon"></span><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"><kbd class="DocSearch-Button-Key"></kbd><kbd class="DocSearch-Button-Key">K</kbd></span></button></div><!--]--></div><nav aria-labelledby="main-nav-aria-label" class="VPNavBarMenu menu" data-v-6aa21345 data-v-dc692963><span id="main-nav-aria-label" class="visually-hidden" data-v-dc692963> Main Navigation </span><!--[--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/shuttle-access/home.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Access</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/shuttle-core/home.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Core</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink active" href="/shuttle-recall/home.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Event Sourcing</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/shuttle-extensions/home.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Extensions</span><!--]--></a><!--]--><!--[--><a class="VPLink link VPNavBarMenuLink" href="/shuttle-esb/home.html" tabindex="0" data-v-dc692963 data-v-e56f3d57><!--[--><span data-v-e56f3d57>Service Bus</span><!--]--></a><!--]--><!--]--></nav><!----><div class="VPNavBarAppearance appearance" data-v-6aa21345 data-v-6c893767><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-6c893767 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div><div class="VPSocialLinks VPNavBarSocialLinks social-links" data-v-6aa21345 data-v-0394ad82 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shuttle/Pendel" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/J2suHcy2x8" aria-label="discord" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-discord"></span></a><!--]--></div><div class="VPFlyout VPNavBarExtra extra" data-v-6aa21345 data-v-bb2aa2f0 data-v-cf11d7a2><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-cf11d7a2><span class="vpi-more-horizontal icon" data-v-cf11d7a2></span></button><div class="menu" data-v-cf11d7a2><div class="VPMenu" data-v-cf11d7a2 data-v-b98bc113><!----><!--[--><!--[--><!----><div class="group" data-v-bb2aa2f0><div class="item appearance" data-v-bb2aa2f0><p class="label" data-v-bb2aa2f0>Appearance</p><div class="appearance-action" data-v-bb2aa2f0><button class="VPSwitch VPSwitchAppearance" type="button" role="switch" title aria-checked="false" data-v-bb2aa2f0 data-v-5337faa4 data-v-1d5665e3><span class="check" data-v-1d5665e3><span class="icon" data-v-1d5665e3><!--[--><span class="vpi-sun sun" data-v-5337faa4></span><span class="vpi-moon moon" data-v-5337faa4></span><!--]--></span></span></button></div></div></div><div class="group" data-v-bb2aa2f0><div class="item social-links" data-v-bb2aa2f0><div class="VPSocialLinks social-links-list" data-v-bb2aa2f0 data-v-7bc22406><!--[--><a class="VPSocialLink no-icon" href="https://github.com/Shuttle/Pendel" aria-label="github" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-github"></span></a><a class="VPSocialLink no-icon" href="https://discord.gg/J2suHcy2x8" aria-label="discord" target="_blank" rel="noopener" data-v-7bc22406 data-v-bd121fe5><span class="vpi-social-discord"></span></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="VPNavBarHamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="VPNavScreen" data-v-6aa21345 data-v-e5dd9c1c><span class="container" data-v-e5dd9c1c><span class="top" data-v-e5dd9c1c></span><span class="middle" data-v-e5dd9c1c></span><span class="bottom" data-v-e5dd9c1c></span></span></button></div></div></div></div><div class="divider" data-v-6aa21345><div class="divider-line" data-v-6aa21345></div></div></div><!----></header><div class="VPLocalNav has-sidebar empty" data-v-5d98c3a5 data-v-a6f0e41e><div class="container" data-v-a6f0e41e><button class="menu" aria-expanded="false" aria-controls="VPSidebarNav" data-v-a6f0e41e><span class="vpi-align-left menu-icon" data-v-a6f0e41e></span><span class="menu-text" data-v-a6f0e41e>Menu</span></button><div class="VPLocalNavOutlineDropdown" style="--vp-vh:0px;" data-v-a6f0e41e data-v-17a5e62e><button data-v-17a5e62e>Return to top</button><!----></div></div></div><aside class="VPSidebar" data-v-5d98c3a5 data-v-319d5ca6><div class="curtain" data-v-319d5ca6></div><nav class="nav" id="VPSidebarNav" aria-labelledby="sidebar-aria-label" tabindex="-1" data-v-319d5ca6><span class="visually-hidden" id="sidebar-aria-label" data-v-319d5ca6> Sidebar Navigation </span><!--[--><!--]--><!--[--><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><!----><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/shuttle-recall/home.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Shuttle.Recall</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0 has-active" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Events</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/shuttle-recall/events/overview.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>Overview</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><div class="no-transition group" data-v-c40bc020><section class="VPSidebarItem level-0" data-v-c40bc020 data-v-b7550ba0><div class="item" role="button" tabindex="0" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><h2 class="text" data-v-b7550ba0>Implementations</h2><!----></div><div class="items" data-v-b7550ba0><!--[--><div class="VPSidebarItem level-1 is-link" data-v-b7550ba0 data-v-b7550ba0><div class="item" data-v-b7550ba0><div class="indicator" data-v-b7550ba0></div><a class="VPLink link link" href="/shuttle-recall/events/sql.html" data-v-b7550ba0><!--[--><p class="text" data-v-b7550ba0>SQL</p><!--]--></a><!----></div><!----></div><!--]--></div></section></div><!--]--><!--[--><!--]--></nav></aside><div class="VPContent has-sidebar" id="VPContent" data-v-5d98c3a5 data-v-1428d186><div class="VPDoc has-sidebar has-aside" data-v-1428d186 data-v-39a288b8><!--[--><!--]--><div class="container" data-v-39a288b8><div class="aside" data-v-39a288b8><div class="aside-curtain" data-v-39a288b8></div><div class="aside-container" data-v-39a288b8><div class="aside-content" data-v-39a288b8><div class="VPDocAside" data-v-39a288b8 data-v-3f215769><!--[--><!--]--><!--[--><!--]--><nav aria-labelledby="doc-outline-aria-label" class="VPDocAsideOutline" data-v-3f215769 data-v-a5bbad30><div class="content" data-v-a5bbad30><div class="outline-marker" data-v-a5bbad30></div><div aria-level="2" class="outline-title" id="doc-outline-aria-label" role="heading" data-v-a5bbad30>On this page</div><ul class="VPDocOutlineItem root" data-v-a5bbad30 data-v-b933a997><!--[--><!--]--></ul></div></nav><!--[--><!--]--><div class="spacer" data-v-3f215769></div><!--[--><!--]--><!----><!--[--><!--]--><!--[--><!--]--></div></div></div></div><div class="content" data-v-39a288b8><div class="content-container" data-v-39a288b8><!--[--><!--]--><main class="main" data-v-39a288b8><div style="position:relative;" class="vp-doc _shuttle-recall_events_overview" data-v-39a288b8><div><h1 id="events" tabindex="-1">Events <a class="header-anchor" href="#events" aria-label="Permalink to &quot;Events&quot;">​</a></h1><h2 id="eventstore" tabindex="-1">EventStore <a class="header-anchor" href="#eventstore" aria-label="Permalink to &quot;EventStore&quot;">​</a></h2><p>An <code>EventStream</code> contains events for a given <code>Guid</code> identifier and is kept outside of your object at all times.</p><p>Your domain object would only be concerned about handling the relevant commands issued to it and returning one or more events from those methods. These will then be added to your <code>EventStream</code> before being persisted using an <code>IEventStore</code> implementation.</p><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> store</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> serviceProvider.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetRequiredService</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IEventStore</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;();</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> aggregate</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Aggregate</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Guid.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewGuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eventStream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aggregate.Id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">eventStream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aggregate.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Move</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(moveCommand));</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SaveAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eventStream);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">eventStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aggregate.Id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsFalse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eventStream.IsEmpty);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">RemoveAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aggregate.Id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">eventStream </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> store.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(aggregate.Id);</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">Assert.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">IsTrue</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(eventStream.IsEmpty);</span></span></code></pre></div><h2 id="eventstream" tabindex="-1">EventStream <a class="header-anchor" href="#eventstream" aria-label="Permalink to &quot;EventStream&quot;">​</a></h2><p>Typically you would not create an <code>EventStream</code> directly but rather make use of an <code>IEventStore.GetAsync</code> method. You would, however, add events to an <code>EventStream</code> and call the <code>Apply</code> method to apply all events within the stream to a given object.</p><p>An event stream has a <code>Guid</code> identifier that is the surrogate key used by the <code>IEventStore</code> for your aggregate. It also has a version number that starts at 1. Each time an event is added to the stream the version is incremented by 1 and the version number is assigned to the event. This version is used to check for concurrency violations. When you get an <code>EventStream</code> from an <code>IEventStore</code> implementation the initial version is set the in the stream. When you try to save the event stream and the version of the event stream in the store does not match the initial version of the stream an <code>EventStreamConcurrencyException</code> is raised by the <code>IEventStore</code> implementation.</p><p>As you can imagine, over time an <code>EventStream</code> may become quite large. You would need to explicitly deal with these situations by modeling an appropriate solution, such as when using the <a href="https://event-driven.io/en/closing_the_books_in_practice/" target="_blank" rel="noreferrer">Closing the Books pattern</a>. This would result in multiple aggregate roots representing a subset of the events. You would, typically, have an overarching aggregate root that manages these subsets. Event ordering is determined by a <code>CorrelationId</code> on the aggregate roots. Your aggregate root the manages this subsets would set the <code>CorrelationId</code> for itself and the subsets. IN this way, the projection sequence is maintained. Projection implemenations will use the <code>CorrelationId</code> and <code>SequenceNumber</code> to determine the sequence. If no <code>CorrelationId</code> is set, then the <code>Id</code> and <code>SequenceNumber</code> will be used.</p><h3 id="constructor" tabindex="-1">Constructor <a class="header-anchor" href="#constructor" aria-label="Permalink to &quot;Constructor&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Guid id, IEventMethodInvoker eventMethodInvoker);</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> EventStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Guid id, </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> version, IEventMethodInvoker eventMethodInvoker, IEnumerable</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">DomainEvent</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> events </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Creates a new <code>EventStream</code> instance with the given properties. The <code>IEventMethodInvoker</code> is responsible for invoking the relevant method related to the event on a provided aggregate instance.</p><h3 id="properties" tabindex="-1">Properties <a class="header-anchor" href="#properties" aria-label="Permalink to &quot;Properties&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Guid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> CorrelationId { get; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Guid Id { get; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Version { get; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Count</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (_events</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">?</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.Count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">??</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">+</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> _appendedEvents.Count;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bool</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IsEmpty</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =&gt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Count </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">==</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 0</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bool</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Removed { get; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">private</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span></code></pre></div><h3 id="remove" tabindex="-1">Remove <a class="header-anchor" href="#remove" aria-label="Permalink to &quot;Remove&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Remove</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>This will set the <code>Removed</code> property to <code>true</code>. When the <code>EventStream</code> is saved using an <code>IEventStore</code> implementation it is the responsibility of the event store to remove all the events associated with the <code>Id</code>.</p><h3 id="commit" tabindex="-1">Commit <a class="header-anchor" href="#commit" aria-label="Permalink to &quot;Commit&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Commit</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>Adds any appended events to the events and makes the initial version of the stream the current version which is the version number of the last event appended.</p><h3 id="add" tabindex="-1">Add <a class="header-anchor" href="#add" aria-label="Permalink to &quot;Add&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">object</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> data</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>Adds a new event to the stream with the next version number applied. This is an instance of any class. Events will be defined by your domain:</p><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> class</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemAdded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Guid</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ProductId</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> string</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Description</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> decimal</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Price</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">get</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">set</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> stream</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> await</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> eventStore.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(Guid.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewGuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">());</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">var</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> itemAdded</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ItemAdded</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            ProductId </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Guid.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">NewGuid</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(),</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Description </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &quot;SampleItem&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">            Price </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 125.50</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        };</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">                </span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">stream.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Add</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(itemAdded);</span></span></code></pre></div><p>It will be up to the event store implementation to serialize the event data and persist it.</p><h3 id="shouldsave" tabindex="-1">ShouldSave <a class="header-anchor" href="#shouldsave" aria-label="Permalink to &quot;ShouldSave&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> bool</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ShouldSave</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span></code></pre></div><p>Returns <code>true</code> if there are are any appended events; else <code>false</code>.</p><h3 id="getevents" tabindex="-1">GetEvents <a class="header-anchor" href="#getevents" aria-label="Permalink to &quot;GetEvents&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> IEnumerable</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">DomainEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetEvents</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventRegistrationType</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> type</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> EventRegistrationType.Appended)</span></span></code></pre></div><p>Returns the events represented by the given <code>EventRegistrationType</code>.</p><h3 id="apply" tabindex="-1">Apply <a class="header-anchor" href="#apply" aria-label="Permalink to &quot;Apply&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Apply</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">object</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> instance</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Applies all the events in the stream against the given object by calling the <code>IEventMethodInvoker</code> provided to the event strean constructor.</p><p>The following is an example of an event method:</p><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">private</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> On</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Sample</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Events</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">v1</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SomeEvent</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> someEvent</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    _someData </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> someEvent.SomeData;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><h3 id="concurrencyinvariant" tabindex="-1">ConcurrencyInvariant <a class="header-anchor" href="#concurrencyinvariant" aria-label="Permalink to &quot;ConcurrencyInvariant&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">public</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> void</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> ConcurrencyInvariant</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">int</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> expectedVersion</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span></code></pre></div><p>If the event stream&#39;s version is not at the <code>expectedVersion</code> an <code>EventStreamConcurrencyException</code> is thrown.</p><h1 id="ieventstore" tabindex="-1">IEventStore <a class="header-anchor" href="#ieventstore" aria-label="Permalink to &quot;IEventStore&quot;">​</a></h1><p>An <code>IEventStore</code> implementation should be able to persist and retrieve an <code>EventStream</code>:</p><h3 id="get" tabindex="-1">Get <a class="header-anchor" href="#get" aria-label="Permalink to &quot;Get&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Task</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">GetAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Guid</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventStreamBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;? </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Returns an <code>EventStream</code> containing all events available for the <code>id</code>; if it is a new stream where there are no event available, an empty stream is returned.</p><p>Passing an empty <code>Guid</code> (<code>00000000-0000-0000-0000-000000000000</code>) will immediately return a new, empty, stream.</p><h3 id="remove-1" tabindex="-1">Remove <a class="header-anchor" href="#remove-1" aria-label="Permalink to &quot;Remove&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Task</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> RemoveAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Guid</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> id</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>All events that belong to the given <code>id</code> are removed.</p><h3 id="save" tabindex="-1">Save <a class="header-anchor" href="#save" aria-label="Permalink to &quot;Save&quot;">​</a></h3><div class="language-c# vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">c#</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">ValueTask</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">long</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt; </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">SaveAsync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventStream</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> eventStream</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">, </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">Action</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">EventStreamBuilder</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&gt;? </span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">builder</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> null</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">);</span></span></code></pre></div><p>Persists the given <code>EventStream</code>.</p></div></div></main><footer class="VPDocFooter" data-v-39a288b8 data-v-e257564d><!--[--><!--]--><!----><nav class="prev-next" aria-labelledby="doc-footer-aria-label" data-v-e257564d><span class="visually-hidden" id="doc-footer-aria-label" data-v-e257564d>Pager</span><div class="pager" data-v-e257564d><a class="VPLink link pager-link prev" href="/shuttle-recall/home.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Previous page</span><span class="title" data-v-e257564d>Shuttle.Recall</span><!--]--></a></div><div class="pager" data-v-e257564d><a class="VPLink link pager-link next" href="/shuttle-recall/events/sql.html" data-v-e257564d><!--[--><span class="desc" data-v-e257564d>Next page</span><span class="title" data-v-e257564d>SQL</span><!--]--></a></div></nav></footer><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><footer class="VPFooter has-sidebar" data-v-5d98c3a5 data-v-e315a0ad><div class="container" data-v-e315a0ad><!----><p class="copyright" data-v-e315a0ad>Copyright © 2013-2025 Eben Roux</p></div></footer><!--[--><!--]--></div></div>
    <script>window.__VP_HASH_MAP__=JSON.parse("{\"index.md\":\"3HlMKh39\",\"shuttle-access_docker-compose.md\":\"p7wBowTW\",\"shuttle-access_guide.md\":\"D_GUollT\",\"shuttle-access_home.md\":\"gqBVFU2J\",\"shuttle-access_overview.md\":\"B6F87I-y\",\"shuttle-core_home.md\":\"B6QInSBP\",\"shuttle-core_shuttle-core-cli.md\":\"C4BRyoPj\",\"shuttle-core_shuttle-core-compression.md\":\"BPXfrfxK\",\"shuttle-core_shuttle-core-contract.md\":\"ufGVI8yI\",\"shuttle-core_shuttle-core-cron.md\":\"eDYtckNo\",\"shuttle-core_shuttle-core-data.md\":\"Lu0DkpPo\",\"shuttle-core_shuttle-core-dependencyinjection.md\":\"C44ID2W_\",\"shuttle-core_shuttle-core-encryption.md\":\"C6ggBctd\",\"shuttle-core_shuttle-core-mediator.md\":\"BMPG0rzu\",\"shuttle-core_shuttle-core-pipelines.md\":\"C9Q1GrLJ\",\"shuttle-core_shuttle-core-reflection.md\":\"CpXFPia9\",\"shuttle-core_shuttle-core-serialization.md\":\"DSFBDJvu\",\"shuttle-core_shuttle-core-specification.md\":\"7OvilD-r\",\"shuttle-core_shuttle-core-streams.md\":\"BXM0Hka2\",\"shuttle-core_shuttle-core-system.md\":\"Dnfsxy6a\",\"shuttle-core_shuttle-core-threading.md\":\"GJJM4hda\",\"shuttle-core_shuttle-core-transactionscope.md\":\"CxQeJlcv\",\"shuttle-core_upgrade-ms-di.md\":\"CWdg6tHW\",\"shuttle-esb_components_identity-provider.md\":\"DCAzXlbh\",\"shuttle-esb_components_message-handler-invoker.md\":\"klItAbh1\",\"shuttle-esb_components_message-handler.md\":\"B16ldss2\",\"shuttle-esb_components_message-route-provider.md\":\"C_R4EjNU\",\"shuttle-esb_components_message-sender.md\":\"CdHL8Asi\",\"shuttle-esb_components_overview.md\":\"CgD0xwjC\",\"shuttle-esb_components_queue-factory-service.md\":\"DqkqoIzY\",\"shuttle-esb_components_queue-service.md\":\"vjVCJOHe\",\"shuttle-esb_components_service-bus-policy.md\":\"Cw7_rfWL\",\"shuttle-esb_components_subscription-service.md\":\"DuRRLd71\",\"shuttle-esb_components_transport-header.md\":\"DjDw92Tu\",\"shuttle-esb_components_transport-message-builder.md\":\"DKpFtykB\",\"shuttle-esb_components_transport-message.md\":\"DQbO7s6J\",\"shuttle-esb_concepts_autonomous-business-components.md\":\"Dj3j6ylI\",\"shuttle-esb_concepts_essentials_bounded-contexts.md\":\"CCtNJYY2\",\"shuttle-esb_concepts_patterns_deferred-messages.md\":\"CAHnQ9sD\",\"shuttle-esb_concepts_patterns_message-idempotence.md\":\"BDqtgVMp\",\"shuttle-esb_concepts_patterns_message-routing.md\":\"BWWeD8b2\",\"shuttle-esb_concepts_patterns_publish-subscribe.md\":\"TW6iiaHz\",\"shuttle-esb_concepts_patterns_request-response.md\":\"GNN-lV3D\",\"shuttle-esb_concepts_patterns_stream-processing.md\":\"CnUDcfM3\",\"shuttle-esb_concepts_why.md\":\"cbFaKklo\",\"shuttle-esb_guide_essentials_exception-handling.md\":\"CrE9ePBn\",\"shuttle-esb_guide_getting-started.md\":\"CDjUP9PR\",\"shuttle-esb_guide_patterns_deferred-messages.md\":\"BLAoQdwQ\",\"shuttle-esb_guide_patterns_dependency-injection.md\":\"B_7IpxKw\",\"shuttle-esb_guide_patterns_message-idempotence.md\":\"FkFK6R-o\",\"shuttle-esb_guide_patterns_publish-subscribe.md\":\"CUa2BuOZ\",\"shuttle-esb_guide_patterns_request-response.md\":\"DXWhjooZ\",\"shuttle-esb_guide_patterns_stream-processing.md\":\"BwLNKuN_\",\"shuttle-esb_home.md\":\"DFvDB-p-\",\"shuttle-esb_implementations_idempotence_sql.md\":\"D3SVZ8Nn\",\"shuttle-esb_implementations_overview.md\":\"DEsV4jrk\",\"shuttle-esb_implementations_queue_amazonsqs.md\":\"CQH3b1Cm\",\"shuttle-esb_implementations_queue_azuresq.md\":\"CeSps73M\",\"shuttle-esb_implementations_queue_filemq.md\":\"BPHuGEQB\",\"shuttle-esb_implementations_queue_rabbitmq.md\":\"C7wI0XGS\",\"shuttle-esb_implementations_queue_sql.md\":\"DMQMU-Kr\",\"shuttle-esb_implementations_stream_azureeh.md\":\"DLTtz7lM\",\"shuttle-esb_implementations_stream_kafka.md\":\"BKyS2eQC\",\"shuttle-esb_implementations_subscription_sql.md\":\"DEHVc0Ea\",\"shuttle-esb_modules_active-time-range.md\":\"B7t9qLgG\",\"shuttle-esb_modules_corrupt-transport-message.md\":\"BIBzmGnO\",\"shuttle-esb_modules_message-forwarding.md\":\"CSDbD5F7\",\"shuttle-esb_modules_overview.md\":\"Di1AD2At\",\"shuttle-esb_modules_purge-inbox.md\":\"B0QVcFLz\",\"shuttle-esb_modules_purge-queues.md\":\"CIQQinBs\",\"shuttle-esb_modules_throttle.md\":\"Bjtj_K8r\",\"shuttle-esb_options_inbox.md\":\"y5Tr5o3-\",\"shuttle-esb_options_message-routes.md\":\"BXy1SF0C\",\"shuttle-esb_options_outbox.md\":\"yCgIwK4l\",\"shuttle-esb_options_processor-thread.md\":\"DomMGUb8\",\"shuttle-esb_options_servicebus.md\":\"DXKOd0fj\",\"shuttle-esb_options_subscription.md\":\"BQ9iAwCu\",\"shuttle-extensions_home.md\":\"msey-4a6\",\"shuttle-extensions_shuttle-extensions-efcore.md\":\"BSCtmu87\",\"shuttle-recall_events_overview.md\":\"CGvTWBwS\",\"shuttle-recall_events_sql.md\":\"DBI7BhEQ\",\"shuttle-recall_getting-started.md\":\"D1wGAYDS\",\"shuttle-recall_home.md\":\"j43z21xh\",\"shuttle-recall_projections_overview.md\":\"DyXpPyu5\",\"shuttle-recall_projections_sql.md\":\"BxJVJBbX\",\"shuttle-recall_walkthrough.md\":\"D84VOwfd\",\"upgrade-v20.md\":\"eS4w4zPa\"}");window.__VP_SITE_DATA__=JSON.parse("{\"lang\":\"en-US\",\"dir\":\"ltr\",\"title\":\"Shuttle\",\"description\":\"Shuttle Documentation\",\"base\":\"/\",\"head\":[],\"router\":{\"prefetchLinks\":true},\"appearance\":true,\"themeConfig\":{\"siteTitle\":\"Shuttle Documentation\",\"search\":{\"provider\":\"local\"},\"socialLinks\":[{\"icon\":\"github\",\"link\":\"https://github.com/Shuttle/Pendel\"},{\"icon\":\"discord\",\"link\":\"https://discord.gg/J2suHcy2x8\"}],\"logo\":\"/logo.svg\",\"footer\":{\"copyright\":\"Copyright © 2013-2025 Eben Roux\"},\"nav\":[{\"text\":\"Access\",\"activeMatch\":\"^/shuttle-access/\",\"link\":\"/shuttle-access/home\"},{\"text\":\"Core\",\"activeMatch\":\"^/shuttle-core/\",\"link\":\"/shuttle-core/home\"},{\"text\":\"Event Sourcing\",\"activeMatch\":\"^/shuttle-recall/\",\"link\":\"/shuttle-recall/home\"},{\"text\":\"Extensions\",\"activeMatch\":\"^/shuttle-extensions/\",\"link\":\"/shuttle-extensions/home\"},{\"text\":\"Service Bus\",\"activeMatch\":\"^/shuttle-esb/\",\"link\":\"/shuttle-esb/home\"}],\"sidebar\":{\"/shuttle-access/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Access\",\"link\":\"/shuttle-access/home\"}]},{\"items\":[{\"text\":\"Overview\",\"link\":\"/shuttle-access/overview\"},{\"text\":\"Docker Compose\",\"link\":\"/shuttle-access/docker-compose\"},{\"text\":\"Guide\",\"link\":\"/shuttle-access/guide\"}]}],\"/shuttle-core/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Core\",\"link\":\"/shuttle-core/home\"}]},{\"items\":[{\"text\":\"Cli\",\"link\":\"/shuttle-core/shuttle-core-cli\"},{\"text\":\"Compression\",\"link\":\"/shuttle-core/shuttle-core-compression\"},{\"text\":\"Contract\",\"link\":\"/shuttle-core/shuttle-core-contract\"},{\"text\":\"Cron\",\"link\":\"/shuttle-core/shuttle-core-cron\"},{\"text\":\"Data\",\"link\":\"/shuttle-core/shuttle-core-data\"},{\"text\":\"Dependency Injection\",\"link\":\"/shuttle-core/shuttle-core-dependencyinjection\"},{\"text\":\"Encryption\",\"link\":\"/shuttle-core/shuttle-core-encryption\"},{\"text\":\"Mediator\",\"link\":\"/shuttle-core/shuttle-core-mediator\"},{\"text\":\"Pipelines\",\"link\":\"/shuttle-core/shuttle-core-pipelines\"},{\"text\":\"Reflection\",\"link\":\"/shuttle-core/shuttle-core-reflection\"},{\"text\":\"Serialization\",\"link\":\"/shuttle-core/shuttle-core-serialization\"},{\"text\":\"Specification\",\"link\":\"/shuttle-core/shuttle-core-specification\"},{\"text\":\"Streams\",\"link\":\"/shuttle-core/shuttle-core-streams\"},{\"text\":\"System\",\"link\":\"/shuttle-core/shuttle-core-system\"},{\"text\":\"Threading\",\"link\":\"/shuttle-core/shuttle-core-threading\"},{\"text\":\"TransactionScope\",\"link\":\"/shuttle-core/shuttle-core-transactionscope\"}]}],\"/shuttle-extensions\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Extensions\",\"link\":\"/shuttle-extensions/home\"}]},{\"text\":\"Extensions\",\"items\":[{\"text\":\"EF Core\",\"link\":\"/shuttle-extensions/shuttle-extensions-efcore\"}]}],\"/shuttle-esb/\":[{\"text\":\"Service Bus\",\"items\":[{\"text\":\"Concepts\",\"link\":\"/shuttle-esb/concepts/why\"},{\"text\":\"Getting started\",\"link\":\"/shuttle-esb/guide/getting-started\"},{\"text\":\"Options\",\"link\":\"/shuttle-esb/options/servicebus\"},{\"text\":\"Components\",\"link\":\"/shuttle-esb/components/overview\"},{\"text\":\"Implementations\",\"link\":\"/shuttle-esb/implementations/overview\"},{\"text\":\"Modules\",\"link\":\"/shuttle-esb/modules/overview\"}]}],\"/shuttle-esb/concepts/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"text\":\"Concepts\",\"items\":[{\"text\":\"Why?\",\"link\":\"/shuttle-esb/concepts/why\"},{\"text\":\"Autonomous Business Components\",\"link\":\"/shuttle-esb/concepts/autonomous-business-components\"}]},{\"text\":\"Patterns\",\"items\":[{\"text\":\"Stream Processing\",\"link\":\"/shuttle-esb/concepts/patterns/stream-processing\"},{\"text\":\"Request / Response\",\"link\":\"/shuttle-esb/concepts/patterns/request-response\"},{\"text\":\"Publish / Subscribe\",\"link\":\"/shuttle-esb/concepts/patterns/publish-subscribe\"},{\"text\":\"Message Idempotence\",\"link\":\"/shuttle-esb/concepts/patterns/message-idempotence\"},{\"text\":\"Deferred Messages\",\"link\":\"/shuttle-esb/concepts/patterns/deferred-messages\"},{\"text\":\"Message Routing\",\"link\":\"/shuttle-esb/concepts/patterns/message-routing\"}]},{\"text\":\"Essentials\",\"items\":[{\"text\":\"Bounded Contexts\",\"link\":\"/shuttle-esb/concepts/essentials/bounded-contexts\"}]}],\"/shuttle-esb/guide/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"text\":\"Overview\",\"items\":[{\"text\":\"Getting Started\",\"link\":\"/shuttle-esb/guide/getting-started\"}]},{\"text\":\"Patterns\",\"items\":[{\"text\":\"Stream Processing\",\"link\":\"/shuttle-esb/guide/patterns/stream-processing\"},{\"text\":\"Request / Response\",\"link\":\"/shuttle-esb/guide/patterns/request-response\"},{\"text\":\"Publish / Subscribe\",\"link\":\"/shuttle-esb/guide/patterns/publish-subscribe\"},{\"text\":\"Deferred Messages\",\"link\":\"/shuttle-esb/guide/patterns/deferred-messages\"},{\"text\":\"Dependency Injection\",\"link\":\"/shuttle-esb/guide/patterns/dependency-injection\"},{\"text\":\"Message Idempotence\",\"link\":\"/shuttle-esb/guide/patterns/message-idempotence\"}]},{\"text\":\"Essentials\",\"items\":[{\"text\":\"Exception Handling\",\"link\":\"/shuttle-esb/guide/essentials/exception-handling\"}]}],\"/shuttle-esb/components/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"text\":\"Components\",\"items\":[{\"text\":\"Identity Provider\",\"link\":\"/shuttle-esb/components/identity-provider\"},{\"text\":\"Message Handler Invoker\",\"link\":\"/shuttle-esb/components/message-handler-invoker\"},{\"text\":\"Message Handler\",\"link\":\"/shuttle-esb/components/message-handler\"},{\"text\":\"Message Route Provider\",\"link\":\"/shuttle-esb/components/message-route-provider\"},{\"text\":\"Message Sender\",\"link\":\"/shuttle-esb/components/message-sender\"},{\"text\":\"Queue Factory Service\",\"link\":\"/shuttle-esb/components/queue-factory-service\"},{\"text\":\"Queue Service\",\"link\":\"/shuttle-esb/components/queue-service\"},{\"text\":\"Policy\",\"link\":\"/shuttle-esb/components/service-bus-policy\"},{\"text\":\"Subscription Service\",\"link\":\"/shuttle-esb/components/subscription-service\"},{\"text\":\"Transport Message\",\"link\":\"/shuttle-esb/components/transport-message\"},{\"text\":\"Transport Message Builder\",\"link\":\"/shuttle-esb/components/transport-message-builder\"},{\"text\":\"Transport Header\",\"link\":\"/shuttle-esb/components/transport-header\"}]}],\"/shuttle-esb/options/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"text\":\"Options\",\"items\":[{\"text\":\"Service Bus\",\"link\":\"/shuttle-esb/options/servicebus\"},{\"text\":\"Inbox\",\"link\":\"/shuttle-esb/options/inbox\"},{\"text\":\"Message Routes\",\"link\":\"/shuttle-esb/options/message-routes\"},{\"text\":\"Outbox\",\"link\":\"/shuttle-esb/options/outbox\"},{\"text\":\"Subscription\",\"link\":\"/shuttle-esb/options/subscription\"},{\"text\":\"Processor Thread\",\"link\":\"/shuttle-esb/options/processor-thread\"}]}],\"/shuttle-esb/implementations/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"items\":[{\"text\":\"Overview\",\"link\":\"/shuttle-esb/implementations/overview\"}]},{\"text\":\"Streams\",\"items\":[{\"text\":\"Kafka\",\"link\":\"/shuttle-esb/implementations/stream/kafka\"},{\"text\":\"Azure Event Hubs\",\"link\":\"/shuttle-esb/implementations/stream/azureeh\"}]},{\"text\":\"Queue\",\"items\":[{\"text\":\"Amazon SQS\",\"link\":\"/shuttle-esb/implementations/queue/amazonsqs\"},{\"text\":\"Azure Storage Queues\",\"link\":\"/shuttle-esb/implementations/queue/azuresq\"},{\"text\":\"File\",\"link\":\"/shuttle-esb/implementations/queue/filemq\"},{\"text\":\"RabbitMQ\",\"link\":\"/shuttle-esb/implementations/queue/rabbitmq\"},{\"text\":\"SQL\",\"link\":\"/shuttle-esb/implementations/queue/sql\"}]},{\"text\":\"Subscription\",\"items\":[{\"text\":\"SQL\",\"link\":\"/shuttle-esb/implementations/subscription/sql\"}]},{\"text\":\"Idempotence\",\"items\":[{\"text\":\"SQL\",\"link\":\"/shuttle-esb/implementations/idempotence/sql\"}]}],\"/shuttle-esb/modules/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Esb\",\"link\":\"/shuttle-esb/home\"}]},{\"text\":\"Modules\",\"items\":[{\"text\":\"Active Time Range\",\"link\":\"/shuttle-esb/modules/active-time-range\"},{\"text\":\"Corrupt Transport Message\",\"link\":\"/shuttle-esb/modules/corrupt-transport-message\"},{\"text\":\"Message Forwarding\",\"link\":\"/shuttle-esb/modules/message-forwarding\"},{\"text\":\"Purge Inbox\",\"link\":\"/shuttle-esb/modules/purge-inbox\"},{\"text\":\"Purge Queues\",\"link\":\"/shuttle-esb/modules/purge-queues\"},{\"text\":\"Throttle\",\"link\":\"/shuttle-esb/modules/throttle\"}]}],\"/shuttle-recall/\":[{\"text\":\"Shuttle.Recall\",\"items\":[{\"text\":\"Getting started\",\"link\":\"/shuttle-recall/getting-started\"},{\"text\":\"Events\",\"link\":\"/shuttle-recall/events/overview\"},{\"text\":\"Projections\",\"link\":\"/shuttle-recall/projections/overview\"},{\"text\":\"Walkthrough\",\"link\":\"/shuttle-recall/walkthrough\"}]}],\"/shuttle-recall/guide/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Recall\",\"link\":\"/shuttle-recall/home\"}]},{\"text\":\"\",\"items\":[{\"text\":\"Getting Started\",\"link\":\"/shuttle-recall/guide/getting-started\"}]}],\"/shuttle-recall/events/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Recall\",\"link\":\"/shuttle-recall/home\"}]},{\"text\":\"Events\",\"items\":[{\"text\":\"Overview\",\"link\":\"/shuttle-recall/events/overview\"}]},{\"text\":\"Implementations\",\"items\":[{\"text\":\"SQL\",\"link\":\"/shuttle-recall/events/sql\"}]}],\"/shuttle-recall/projections/\":[{\"text\":\"\",\"items\":[{\"text\":\"Shuttle.Recall\",\"link\":\"/shuttle-recall/home\"}]},{\"text\":\"Projections\",\"items\":[{\"text\":\"Overview\",\"link\":\"/shuttle-recall/projections/overview\"}]},{\"text\":\"Implementations\",\"items\":[{\"text\":\"SQL\",\"link\":\"/shuttle-recall/projections/sql\"}]}]}},\"locales\":{},\"scrollOffset\":134,\"cleanUrls\":false}");</script>
    
  </body>
</html>